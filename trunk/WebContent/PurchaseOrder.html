<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>

<!-- Mobile viewport optimisation -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- stylesheets -->
<link rel="stylesheet" href="css/ktmstore.css" type="text/css"/>
<link rel="stylesheet" href="css/central.css" type="text/css"/>
<link rel="stylesheet" href="css/smoothness/jquery-ui-1.9.0.custom.css" type="text/css"/>
<link rel="stylesheet" href="css/flora.calendars.picker.css" type="text/css"/>

<script type="text/javascript" src="js/itsci-lib.js"></script>
<script type="text/javascript" src="js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.0.custom.js"></script>
<script type="text/javascript" src="js/jquery-ui-datepicker-th.js"></script>

<!--[if lte IE 7]>
<link rel="stylesheet" href="yaml/core/iehacks.min.css" type="text/css"/>
<![endif]-->

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<title>${ktm:getText("app.title")}</title>

<style type="text/css">
h1 { font-size: 1.2em; margin: .6em 0; }
div#users-contain { width: 350px; margin: 20px 0; }
div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
.ui-dialog .ui-state-error { padding: .3em; }
.validateTips { border: 1px solid transparent; padding: 0.3em; }
        
#dvPurchaseOrder
{
    width: 100%;
    height: 100px;
    margin: 0 auto;
    padding: 5px;
    border:1px solid black;
    display: block;
    font-size: 0.9em;
    background-color: #FFFFEE;
}
#dvSupplier_desc {
    border:1px solid black;
    width: 350px;
    height: auto;
}
#dvPurchaseOrderForm {
    border:1px solid black;
    width: 272px;
    height: auto;
}
.cLabel {
    text-align: right;
}
#dvGrid {
    
}
tr td {
    padding: 0px;
    margin: 0px;
    border: 0px;
}
p {
    margin-top: 0;
}
</style>
<script>
$(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "th" ] );
    $("#dateCreated").datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true
    });
    $("#dvSupplier_desc").position({
        of: $("#dvPurchaseOrder"),
        my: "left top",
        at: "left top",
        offset: 0
    });
    $("#dvPurchaseOrderForm").position({
        of: $("#dvPurchaseOrder"),
        my: "right top",
        at: "right top",
        offset: 0
    });
    var cache = {};
    $( "#supplierId" ).autocomplete({
        minLength: 0,
        source: function( request, response ) {
            var term = request.term;
            if ( term in cache ) {
                response( cache[ term ] );
                return;
            }
            $.getJSON( "CRUDSupplier?method=listJSON", request, function( data, status, xhr ) {
                cache[ term ] = data;
                response( data );
            });
        },
        focus: function( event, ui ) {
            $( "#supplierId" ).val( ui.item.identifier + " - " + ui.item.name );
            return false;
        },
        select: function( event, ui ) {
            $( "#supplierId" ).val( ui.item.identifier + " - " + ui.item.name );
            $( "#supplier-desc" ).html( ui.item.name );
            return false;
        }
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.identifier + " - " + item.name + "</a>" )
            .appendTo( ul );
    };
        
    $( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Select supplier": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );

                bValid = bValid && checkLength( name, "username", 3, 16 );
                bValid = bValid && checkLength( email, "email", 6, 80 );
                bValid = bValid && checkLength( password, "password", 5, 16 );

                bValid = bValid && checkRegexp( name, /^[a-z]([0-9a-z_])+$/i, "Username may consist of a-z, 0-9, underscores, begin with a letter." );
                // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
                bValid = bValid && checkRegexp( email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "eg. ui@jquery.com" );
                bValid = bValid && checkRegexp( password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );

                if ( bValid ) {
                    $( "#users tbody" ).append( "<tr>" +
                        "<td>" + name.val() + "</td>" + 
                        "<td>" + email.val() + "</td>" + 
                        "<td>" + password.val() + "</td>" +
                    "</tr>" ); 
                    $( this ).dialog( "close" );
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    });
});

</script>
</head>
<body>
  <div class="ym-wrapper">
    <div class="ym-wbox">
      <header><h1>${ktm:getText("app.title")}</h1></header>
        <div id="main">
          <div class="ym-column">
            <div class="ym-col1">
            <div class="ym-cbox">
              <section class="box info">
                <div class="ym-wbox">
                <h3>${ktm:getText("nav.database")} ${ktm:getText("nav.database.receive_from_supplier")}</h3>
                </div>
                <div class="ym-wbox">
                  <form action="CRUDPurchaseOrder" method="post">
                    <input type="hidden" name="uniqueId" value="${bean.uniqueId}">
                    <input type="hidden" name="method" value="save">
                    
                    <div id="dvPurchaseOrder">
                        <div id="dvSupplier_desc">
                            <p>Description:</p>
                            <p id="supplier-desc"></p>
                        </div>
                        <div id="dvPurchaseOrderForm">
                            <fieldset>
                                <table style="border: 0; margin: 0;">
                                    <tr>
                                        <td class="cLabel"><label for="dateCreated">Date Create: </label></td>
                                        <td><input style="width: 170px" type="text" name="dateCreated" id="dateCreated" class="text ui-widget-content ui-corner-all" /></td>
                                    </tr>
                                    <tr>
                                        <td class="cLabel"><label for="supplierId">Supplier Id: </label></td>
                                        <td>
                                            <input style="width: 200px"  type="text" name="supplierId"  id="supplierId" class="text ui-widget-content ui-corner-all">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="cLabel"><label for="identifier">Order Id: </label></td>
                                        <td><input style="width: 200px"  type="text" name="identifier" id="identifier" value="" class="text ui-widget-content ui-corner-all" /></td>
                                    </tr>
                                </table>
                            </fieldset>
                        </div>
                    </div>
                    <div id="dvGrid">
                        
                    </div>
                    
                    <div class="ym-fbox-button">
                      <input type="submit" class="ym-button" value='${ktm:getText("page.btn.save")} ${ktm:getText("nav.database.receive_from_supplier")}' id="submit"
                        name="submit"
                      />
                      <input type="button" class="ym-button" value='${ktm:getText("page.btn.cancel")}' id="cancel"
                        name="cancel" onclick="goTo('CRUDPurchaseOrder?method=list')"
                      />
                    </div>
                  </form>
                </div>
              </section>
            </div>
            </div>
            <aside class="ym-col3">
            <div class="ym-cbox">
              <ul>
                <li><a href="CRUDPurchaseOrder?method=list">${ktm:getText("menu.main")}</a></li>
              </ul>
            </div>
          </aside>
          </div>
        </div>
      <jsp:include page="${context.jspFooter}"></jsp:include>
    </div>
  </div>
  
<div id="dialog-form" title="Select Supplier">
    <form>
    <fieldset>
        <table style="font-size: 0.85em;">
            <tr>
                <td><label for="byId">Find by id</label></td>
                <td><input type="text" name="byId" id="byId" class="text ui-widget-content ui-corner-all" /></td>
                <td><input type="button" value="search"></td>
            </tr>
            <tr>
                <td><label for="byName">Find by name</label></td>
                <td><input type="text" name="byName" id="byName" value="" class="text ui-widget-content ui-corner-all" /></td>
                <td><input type="button" value="search"></td>
            </tr>
        </table>
    </fieldset>
    </form>
</div>
</body>
</html>
